<!doctype html>
<html lang="en-US">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>NvrL8</title>
  <link rel="stylesheet" type="text/css" href="bundle.css">
</head>
<script>
  function onSignIn(googleUser) {
    //var httpRequest;
    var profile = googleUser.getBasicProfile();
    var id_token = googleUser.getAuthResponse().id_token;
    var data = { name: profile.getName, email: profile.getEmail, imageURL: profile.getImageUrl, logid: id_token};
    //httpRequest = new XMLHttpRequest();
    const addressUri = "http://nvrl8-wskev.azurewebsites.net/api/user";
    //httpRequest.open("POST", addressUri);
    //httpRequest.setRequestHeader("Access-Control-Allow-Methods","*");
    //httpRequest.setRequestHeader("Access-Control-Allow-Origin", "*");
    //httpRequest.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    //httpRequest.setRequestHeader("Content-Type","application/json");
    //httpRequest.send(JSON.stringify(IUser));
    var xhr = new XMLHttpRequest();
    xhr.open("POST", addressUri);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onload = function () {
      console.log('Signed in as: ' + xhr.getEmail);
    };
    xhr.send('idtoken=' + data);

    location.href = "profile.htm";
  }
</script>

<body>
  <header class="container fluid col-lg-12">
    <div class="col-lg-6">
      <h1 class="color">Nvr<span class="forsent">L8</span></h1>
    </div>
  </header>
  <form class="col-lg-4 offset-lg-5 formcontainer">
    <div class="g-signin2" data-onsuccess="onSignIn"></div>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="280043263121-cnpj4knrjbr2h3vgochfcd5l73u7gqmv.apps.googleusercontent.com">
    <script src="bundle.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous" />

</body>

</html>